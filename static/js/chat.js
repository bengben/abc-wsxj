$(function(){var a=$("#chat");$("#chat .message-center a").on("click",function(){var f=$(this).find(".mail-contnet h5").text();var d=$(this).find(".user-img img").attr("src");var c=$(this).attr("data-user-id");var g=$(this).find(".profile-status").attr("data-status");if($(this).hasClass("active")){$(this).toggleClass("active");$(".chat-windows #user-chat"+c).hide()}else{$(this).toggleClass("active");if($(".chat-windows #user-chat"+c).length){$(".chat-windows #user-chat"+c).removeClass("mini-chat").show()}else{var e=msg_receive("I watched the storm, so beautiful yet terrific.");e+=msg_sent("That is very deep indeed!");var b="<div class='user-chat' id='user-chat"+c+"' data-user-id='"+c+"'>";b+="<div class='chat-head'><img src='"+d+"' data-user-id='"+c+"'><span class='status "+g+"'></span><span class='name'>"+f+"</span><span class='opts'><i class='material-icons closeit' data-user-id='"+c+"'>clear</i><i class='material-icons mini-chat' data-user-id='"+c+"'>remove</i></span></div>";b+="<div class='chat-body'><ul class='chat-list'>"+e+"</ul></div>";b+="<div class='chat-footer'><input type='text' data-user-id='"+c+"' placeholder='Type & Enter' class='form-control'></div>";b+="</div>";$(".chat-windows").append(b)}}});$("body").on("click",".chat-windows .user-chat .chat-head .closeit",function(b){var c=$(this).attr("data-user-id");$(".chat-windows #user-chat"+c).hide();$("#chat .message-center .user-info#chat_user_"+c).removeClass("active")});$("body").on("click",".chat-windows .user-chat .chat-head img, .chat-windows .user-chat .chat-head .mini-chat",function(b){var c=$(this).attr("data-user-id");if(!$(".chat-windows #user-chat"+c).hasClass("mini-chat")){$(".chat-windows #user-chat"+c).addClass("mini-chat")}else{$(".chat-windows #user-chat"+c).removeClass("mini-chat")}});$("body").on("keypress",".chat-windows .user-chat .chat-footer input",function(b){if(b.keyCode==13){var c=$(this).attr("data-user-id");var d=$(this).val();d=msg_sent(d);$(".chat-windows #user-chat"+c+" .chat-body .chat-list").append(d);$(this).val("");$(this).focus()}$(".chat-windows #user-chat"+c+" .chat-body").perfectScrollbar({suppressScrollX:true})})});function msg_receive(e){var a=new Date();var b=a.getHours();var c=a.getMinutes();return"<li class='msg_receive'><div class='chat-content'><div class='box bg-light-info'>"+e+"</div></div><div class='chat-time'>"+b+":"+c+"</div></li>"}function msg_sent(e){var a=new Date();var b=a.getHours();var c=a.getMinutes();return"<li class='odd msg_sent'><div class='chat-content'><div class='box bg-light-info'>"+e+"</div><br></div><div class='chat-time'>"+b+":"+c+"</div></li>"}$(".searchbar > input").on("keyup",function(){var a=new RegExp($(this).val(),"i");$(".chat-users .chat-user").hide();$(".chat-users .chat-user").filter(function(){return a.test($(this).text())}).show()});$(".app-chat .chat-user ").on("click",function(a){if($(this).hasClass(".active")){return false}else{var b=$(this).attr("data-user-id");var e=$(this).find(".message-title").text();var d=$(this).find("img").attr("src");var c=$(this).parents(".chat-application").find(".chat-not-selected").hide().siblings(".chatting-box").show();var f=$(this).parents(".chat-application").find(".chat-container .chat-box-inner-part").show();if(window.innerWidth<=767){$(".chat-container .current-chat-user-name .name").html(e.split(" ")[0])}else{if(window.innerWidth>767){$(".chat-container .current-chat-user-name .name").html(e)}}$(".chat-container .current-chat-user-name img").attr("src",d);$(".chat").removeClass("active-chat");$(".user-chat-box .chat-user").removeClass("active");$(this).addClass("active");$(".chat[data-user-id = "+b+"]").addClass("active-chat")}if($(this).parents(".user-chat-box").hasClass("user-list-box-show")){$(this).parents(".user-chat-box").removeClass("user-list-box-show")}$(".chat-meta-user").addClass("chat-active");$(".chat-send-message-footer").addClass("chat-active")});$(".message-type-box").on("keydown",function(f){if(f.key==="Enter"){var i=new Date();var g=i.getHours();var h=i.getMinutes();var a=(g>=12)?"pm":"am";g=g%12;g=g?g:12;g=g<10?"0"+g:g;h=h<10?"0"+h:h;var j=g+" : "+h+" "+a;var c=$(this);var d=c.val();if(d===""){return}$messageHtml='<li class="odd mt-4"> <div class="chat-content pl-3 d-inline-block text-right"> <div class="box mb-2 d-inline-block text-dark rounded p-2 bg-light-inverse">'+d+'<br> </div></div> <div class="chat-time d-inline-block text-right text-muted">'+j+"</div> </li>";var b=$(this).parents(".chat-application").find(".active-chat").append($messageHtml);var e=c.val("")}});